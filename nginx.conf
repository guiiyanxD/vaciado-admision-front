server {
# Nginx debe escuchar en el puerto especificado por Cloud Run ($PORT, por defecto 8080)
listen 8080;
server_name localhost;

# Define la ruta base para servir archivos estáticos (donde copiamos la carpeta 'dist')
root /usr/share/nginx/html;

# Intenta primero servir el archivo exacto. Si no lo encuentra, redirige al index.html
# Esto es crucial para el modo historial de Vue Router (History Mode)
location / {
    try_files $uri $uri/ /index.html;
}

# Bloque para archivos de caché (opcional, pero buena práctica)
location ~* \.(?:css|js|map|jpe?g|gif|png)$ {
    expires 1y;
    access_log off;
    add_header Cache-Control "public, max-age=31536000";
}

# Bloque para servir fuentes (opcional)
location ~* \.(?:ttf|ttc|otf|eot|woff|woff2)$ {
    expires 1y;
    access_log off;
    add_header Cache-Control "public, max-age=31536000";
}

# Deshabilita logs de acceso para iconos comunes
location = /favicon.ico { log_not_found off; access_log off; }
location = /robots.txt  { log_not_found off; access_log off; }


} # Cierre del bloque 'server'